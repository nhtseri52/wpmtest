<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Typing Master Pro - Admin Elite</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --primary: #3498db; --bg: #cfe2f3; --dark: #44475a; --success: #2ecc71; --danger: #e74c3c; --white: #ffffff; }
        * { box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; transition: 0.3s; }
        body { background: var(--bg); display: flex; padding: 25px; gap: 20px; margin: 0; height: 100vh; color: #333; }
        
        /* Sidebar */
        .sidebar { width: 320px; flex-shrink: 0; display: flex; flex-direction: column; gap: 15px; }
        .side-card { background: var(--white); border-radius: 15px; box-shadow: 0 8px 20px rgba(0,0,0,0.1); overflow: hidden; }
        .nav-item { padding: 15px 20px; cursor: pointer; display: flex; align-items: center; gap: 12px; border-bottom: 1px solid #f0f0f0; font-weight: 500; }
        .nav-item.active { background: var(--primary); color: white; }
        .nav-item:hover:not(.active) { background: #f8f9fa; transform: translateX(5px); }

        /* Main Area */
        .main-container { flex-grow: 1; display: flex; flex-direction: column; gap: 20px; }
        .content-panel { background: var(--white); padding: 35px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); flex-grow: 1; overflow-y: auto; position: relative; }

        /* Typing UI (Theo ·∫£nh b·∫°n g·ª≠i) */
        .word-display { font-size: 28px; padding: 25px; background: #fdfdfd; border: 1px solid #e1e4e8; border-radius: 12px; min-height: 140px; margin-bottom: 25px; line-height: 1.8; color: #aaa; text-align: left; }
        .word-active { background: #d1d8e0; color: #2f3640; border-radius: 5px; padding: 0 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .word-correct { color: var(--success); }
        .word-wrong { background: var(--danger); color: white; border-radius: 5px; padding: 0 5px; }

        .typing-bar { background: #b8d4f0; padding: 12px 20px; border-radius: 12px; display: flex; gap: 10px; align-items: center; }
        .input-style { flex: 1; height: 55px; padding: 0 20px; font-size: 22px; border-radius: 10px; border: 1px solid #999; outline: none; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1); }
        .timer-badge { background: #3c4a5c; color: white; padding: 0 25px; height: 55px; display: flex; align-items: center; justify-content: center; font-size: 26px; border-radius: 10px; font-weight: bold; min-width: 100px; }
        .reset-btn { background: var(--primary); color: white; width: 60px; height: 55px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 24px; cursor: pointer; border: none; }
        .reset-btn:hover { background: #2980b9; transform: rotate(180deg); }

        /* Admin & Modals */
        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 10000; display: none; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .modal-box { background: white; padding: 40px; border-radius: 20px; width: 450px; text-align: center; }
        .admin-box { background: #fff3cd; border: 1px solid #ffeeba; padding: 20px; border-radius: 15px; margin-top: 20px; }
        
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px; border-bottom: 1px solid #eee; text-align: left; }
        .btn-action { padding: 8px 16px; border-radius: 8px; border: none; cursor: pointer; font-weight: bold; }
        .btn-blue { background: var(--primary); color: white; }
        .btn-red { background: var(--danger); color: white; }

        .page { display: none; } .page.active { display: block; }
    </style>
</head>
<body>

    <div id="auth-screen" class="modal" style="display: flex;">
        <div class="modal-box">
            <h2>üîë ƒêƒÉng nh·∫≠p H·ªá th·ªëng</h2>
            <input type="text" id="auth-u" placeholder="Username" style="width:100%; padding:15px; margin:10px 0; border: 1px solid #ddd; border-radius: 10px;">
            <input type="password" id="auth-p" placeholder="Password" style="width:100%; padding:15px; margin:10px 0; border: 1px solid #ddd; border-radius: 10px;">
            <button class="btn-action btn-blue" style="width:100%; padding:15px;" onclick="app.handleAuth()">X√ÅC NH·∫¨N</button>
            <p style="font-size:12px; color:var(--danger); margin-top:15px;">Admin: nhtseri | Pass: Locthinh1!</p>
        </div>
    </div>

    <div id="res-modal" class="modal">
        <div class="modal-box">
            <h1 style="color:var(--primary)">K·∫æT QU·∫¢</h1>
            <div style="display:flex; justify-content:space-around; margin:30px 0;">
                <div><h2 id="r-wpm">0</h2><small>T·ªëc ƒë·ªô (WPM)</small></div>
                <div><h2 id="r-acc">0%</h2><small>Ch√≠nh x√°c</small></div>
            </div>
            <button class="btn-action btn-blue" onclick="app.closeRes()">TH·ª¨ L·∫†I</button>
        </div>
    </div>

    <div class="sidebar" id="sidebar-inject"></div>

    <div class="main-container">
        <div class="content-panel">
            <div id="page-1" class="page active">
                <h1 id="t-m1">T·∫≠p g√µ Random</h1>
                <div id="display-1" class="word-display"></div>
                <div class="typing-bar">
                    <input type="text" id="input-1" class="input-style" placeholder="G√µ c√°c t·ª´ ph√≠a tr√™n..." autocomplete="off">
                    <div id="timer-1" class="timer-badge">1:00</div>
                    <button class="reset-btn" onclick="app.resetTyping()"><i class="fa-solid fa-rotate-right"></i></button>
                </div>
            </div>

            <div id="page-2" class="page">
                <h1 id="t-m2">H∆∞·ªõng d·∫´n g√µ ph√≠m</h1>
                <div id="content-m2">
                    <img id="img-m2" src="https://vcdn-vnexpress.vnecdn.net/2021/03/17/keyboard-1615969566-8835-1615969623.jpg" style="width:100%; border-radius:15px; border:5px solid #eee;">
                    <p style="font-size:18px; line-height:1.6; margin-top:20px;">H·ªçc c√°ch ƒë·∫∑t 10 ng√≥n tay l√™n b√†n ph√≠m c∆° b·∫£n...</p>
                </div>
            </div>

            <div id="page-3" class="page">
                <h1 id="t-m3">B·∫£ng x·∫øp h·∫°ng</h1>
                <table><thead><tr><th>H·∫°ng</th><th>T√™n</th><th>WPM</th><th>ƒê·ªô ch√≠nh x√°c</th></tr></thead><tbody id="rank-data"></tbody></table>
            </div>

            <div id="page-4" class="page">
                <h1 id="t-m4">C·ªông ƒë·ªìng chia s·∫ª</h1>
                <div style="display:flex; gap:10px; margin-bottom:20px;">
                    <input type="text" id="q-comm" placeholder="T√¨m t√™n vƒÉn b·∫£n..." oninput="app.renderComm()" style="flex:1; padding:12px; border-radius:10px; border:1px solid #ddd;">
                    <button class="btn-action btn-blue" onclick="app.sortComm('like')">Top Like</button>
                    <button class="btn-action btn-blue" onclick="app.sortComm('new')">M·ªõi nh·∫•t</button>
                    <button class="btn-action btn-blue" style="background:var(--success)" onclick="app.addPost()">+ ƒêƒÉng b√†i</button>
                </div>
                <table><thead><tr><th>VƒÉn b·∫£n</th><th>T√°c gi·∫£</th><th>L∆∞·ª£t Like</th><th>Thao t√°c</th></tr></thead><tbody id="comm-data"></tbody></table>
            </div>

            <div id="page-god" class="page">
                <h1 style="color:var(--danger)"><i class="fa-solid fa-skull-crossbones"></i> GOD MODE SYSTEM</h1>
                <div class="admin-box">
                    <h3>S·ª≠a th√¥ng tin m·ª•c</h3>
                    M·ª•c: <select id="sel-m" onchange="app.loadAdminSet()"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select>
                    T√™n: <input type="text" id="set-t" placeholder="T√™n m·ª•c m·ªõi">
                    ·∫¢nh (M·ª•c 2): <input type="text" id="set-i" placeholder="Link ·∫£nh">
                    <button class="btn-action btn-blue" onclick="app.saveAdminSet()">L∆ØU</button>
                </div>
                <div class="admin-box">
                    <h3>Qu·∫£n l√Ω ng∆∞·ªùi d√πng</h3>
                    <table><thead><tr><th>User</th><th>Pass</th><th>Gmail</th><th>Action</th></tr></thead><tbody id="user-data"></tbody></table>
                </div>
                <div class="admin-box">
                    <h3>C∆° ch·∫ø M·ª•c 1</h3>
                    Th·ªùi gian (gi√¢y): <input type="number" id="set-time" value="60" style="width:80px;">
                    <button class="btn-action btn-blue" onclick="app.saveTime()">L∆ØU</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // DATA 400+ T·ª™ V·ª∞NG TI·∫æNG VI·ªÜT
        const BIG_DATA = "anh|em|gia|ƒë√¨nh|tr∆∞·ªùng|h·ªçc|b√†n|ph√≠m|m√°y|t√≠nh|chu·ªôt|m√†n|h√¨nh|l·∫≠p|tr√¨nh|vi√™n|ng√¥n|ng·ªØ|thi·∫øt|k·∫ø|ƒë·ªì|h·ªça|√¢m|nh·∫°c|ca|sƒ©|vƒÉn|h√≥a|x√£|h·ªôi|kinh|t·∫ø|ph√°t|tri·ªÉn|t∆∞∆°ng|lai|h·∫°nh|ph√∫c|th√†nh|c√¥ng|n·ªó|l·ª±c|ki√™n|tr√¨|kh√≥|khƒÉn|th·ª≠|th√°ch|kh√°m|ph√°|th·∫ø|gi·ªõi|vi·ªát|nam|h√†|n·ªôi|s√†i|g√≤n|du|l·ªãch|bi·ªÉn|r·ª´ng|n√∫i|s√¥ng|su·ªëi|hoa|l√°|c√¢y|c·ªè|chim|ch√≥c|th√∫|v·∫≠t|m·∫∑t|tr·ªùi|m·∫∑t|trƒÉng|ng√¥i|sao|b·∫ßu|tr·ªùi|m∆∞a|n·∫Øng|gi√≥|b√£o|tuy·∫øt|kh√¥ng|kh√≠|n∆∞·ªõc|u·ªëng|th·ª©c|ƒÉn|ngon|r·∫ª|ƒë·∫πp|xinh|vui|v·∫ª|bu·ªìn|b√£|lo|l·∫Øng|s·ª£|h√£i|t·ª±|tin|m·∫°nh|m·∫Ω|y·∫øu|·ªõt|th√¥ng|minh|s√°ng|t·∫°o|t√†i|nƒÉng|xu·∫•t|s·∫Øc|vƒ©|ƒë·∫°i|l·ªãch|s·ª≠|ƒë·ªãa|l√Ω|to√°n|h·ªçc|v·∫≠t|l√Ω|h√≥a|h·ªçc|sinh|h·ªçc|ng·ªØ|vƒÉn|ti·∫øng|anh|nh·∫≠t|b·∫£n|h√†n|qu·ªëc|trung|qu·ªëc|m·ªπ|ph√°p|ƒë·ª©c|√Ω|nga|anh|qu·ªëc|√∫c|l√°|c·ªù|ƒë·ªôc|l·∫≠p|t·ª±|do|b√¨nh|ƒë·∫≥ng|b√°c|√°i|nh√¢n|d√¢n|t·ªï|qu·ªëc|bi√™n|c∆∞∆°ng|h·∫£i|ƒë·∫£o|qu·∫ßn|ƒë·∫£o|tr∆∞·ªùng|sa|ho√†ng|sa|m·∫π|cha|√¥ng|b√†|c√¥|d√¨|ch√∫|b√°c|th·∫ßy|c√¥|b·∫°n|b√®|ng∆∞·ªùi|y√™u|c∆∞·ªõi|h·ªèi|sinh|nh·∫≠t|l·ªÖ|h·ªôi|t·∫øt|nguy√™n|ƒë√°n|trung|thu|gi√°ng|sinh|nƒÉm|m·ªõi|m√πa|xu√¢n|m√πa|h·∫°|m√πa|thu|m√πa|ƒë√¥ng|s√°ch|v·ªü|vi·∫øt|m·ª±c|th∆∞·ªõc|k·∫ª|t·∫©y|b√∫t|ch√¨|c·∫∑p|s√°ch|ƒë·ªìng|ph·ª•c|l·ªõp|h·ªçc|s√¢n|tr∆∞·ªùng|gi√°o|vi√™n|sinh|vi√™n|h·ªçc|sinh|thi|c·ª≠|ƒëi·ªÉm|s·ªë|h·ªçc|b·ªïng|ki·∫øn|th·ª©c|k·ªπ|nƒÉng|kinh|nghi·ªám|vi·ªác|l√†m|ngh·ªÅ|nghi·ªáp|c√¥ng|ty|vƒÉn|ph√≤ng|gi√°m|ƒë·ªëc|nh√¢n|vi√™n|kh√°ch|h√†ng|d·ªãch|v·ª•|s·∫£n|ph·∫©m|ch·∫•t|l∆∞·ª£ng|gi√°|c·∫£|mua|b√°n|th·ªã|tr∆∞·ªùng|ƒë·∫ßu|t∆∞|t√†i|ch√≠nh|ng√¢n|h√†ng|ti·ªÅn|t·ªá|v√†ng|b·∫°c|kim|c∆∞∆°ng|ƒë√°|qu√Ω|trang|s·ª©c|qu·∫ßn|√°o|gi√†y|d√©p|t√∫i|x√°ch|m·ªπ|ph·∫©m|l√†m|ƒë·∫πp|s·ª©c|kh·ªèe|th·ªÉ|thao|b√≥ng|ƒë√°|b√≥ng|chuy·ªÅn|b√≥ng|r·ªï|c·∫ßu|l√¥ng|tennis|b∆°i|l·ªôi|ch·∫°y|b·ªô|gym|yoga|v√µ|thu·∫≠t|chi·∫øn|ƒë·∫•u|tr√≤|ch∆°i|ƒëi·ªán|t·ª≠|gi·∫£i|tr√≠|phim|·∫£nh|truy·ªÅn|h√¨nh|b√°o|ch√≠|m·∫°ng|x√£|h·ªôi|facebook|youtube|tiktok|google|internet|ƒëi·ªán|tho·∫°i|th√¥ng|minh|m√°y|t√≠nh|b·∫£ng|camera|ch·ª•p|·∫£nh|quay|phim|ngh·ªá|thu·∫≠t|h·ªôi|h·ªça|ƒëi√™u|kh·∫Øc|ki·∫øn|tr√∫c|x√¢y|d·ª±ng|nh√†|·ªü|chung|c∆∞|bi·ªát|th·ª±|kh√°ch|s·∫°n|nh√†|h√†ng|qu√°n|c√†|ph√™|tr√†|s·ªØa|b√°nh|m√¨|ph·ªü|b√∫n|ch·∫£|nem|r√°n|c∆°m|t·∫•m|h·∫£i|s·∫£n|tr√°i|c√¢y|rau|c·ªß|th·ªãt|c√°|tr·ª©ng|s·ªØa|ƒë∆∞·ªùng|mu·ªëi|m·∫Øm|·ªõt|t·ªèi|h√†nh|g·ª´ng|s·∫£|chanh|qu·∫•t|cam|qu√Ωt|chu·ªëi|t√°o|l√™|nho|d√¢u|t√¢y|xo√†i|mƒÉng|c·ª•t|s·∫ßu|ri√™ng|nh√£n|v·∫£i|m∆°|m·∫≠n|ƒë√†o|d∆∞a|h·∫•u|d·ª´a|thanh|long|·ªïi|na|h·ªìng|xi√™m|v√∫|s·ªØa|c√≥c|kh·∫ø|me|m·∫Øc|kh√©n|h·∫°t|d·ªïi|m·∫≠t|ong|ph·∫•n|hoa|r∆∞·ª£u|bia|thu·ªëc|l√°|c√†|ph√™|tr√†|xanh|n∆∞·ªõc|ng·ªçt|n∆∞·ªõc|su·ªëi|n∆∞·ªõc|kho√°ng|sinh|t·ªë|kem|ch√®|th·∫°ch|tr√¢n|ch√¢u|b√°nh|k·∫πo|m·ª©t|h·∫°t|d∆∞a|h·∫°t|h∆∞·ªõng|d∆∞∆°ng|h·∫°t|b√≠|h·∫°t|d·∫ª|h·∫°nh|nh√¢n|√≥c|ch√≥|m·∫Øc|ca|ƒëi·ªÅu|ƒë·∫≠u|ph·ªông|m√®|v·ª´ng|g·∫°o|n·∫øp|t·∫ª|ng√¥|khoai|s·∫Øn|ƒë·∫≠u|ƒë·ªó|l·∫°c|v·ª´ng|d·∫ßu|ƒÉn|m·ª°|l·ª£n|b∆°|pho|m√°t".split('|');

        const app = {
            user: null, words: [], curIdx: 0, timer: null, timeLeft: 60, ok: 0, err: 0, isPlaying: false,
            conf: JSON.parse(localStorage.getItem('sys_v14')) || { m1:"M·ª•c 1", m2:"M·ª•c 2", m3:"M·ª•c 3", m4:"M·ª•c 4", time:60, img2:"" },

            init() {
                const s = localStorage.getItem('session_v14');
                if(s) { 
                    this.user = JSON.parse(s);
                    document.getElementById('auth-screen').style.display = 'none';
                    this.applyConf(); this.showPage(1);
                }
            },

            handleAuth() {
                const u = document.getElementById('auth-u').value.trim(), p = document.getElementById('auth-p').value.trim();
                if(u === 'nhtseri' && p === 'Locthinh1!') {
                    this.user = {u, isAdmin: true, e:'admin@pro.com'};
                } else {
                    let d = JSON.parse(localStorage.getItem('u_'+u));
                    if(d) {
                        if(d.p === p) this.user = {u, isAdmin:false, e:d.e};
                        else return alert("Sai pass!");
                    } else {
                        localStorage.setItem('u_'+u, JSON.stringify({p, e:u+'@gmail.com'}));
                        this.user = {u, isAdmin:false, e:u+'@gmail.com'};
                    }
                }
                localStorage.setItem('session_v14', JSON.stringify(this.user));
                location.reload();
            },

            applyConf() {
                document.getElementById('t-m1').innerText = this.conf.m1;
                document.getElementById('t-m2').innerText = this.conf.m2;
                document.getElementById('t-m3').innerText = this.conf.m3;
                document.getElementById('t-m4').innerText = this.conf.m4;
                if(this.conf.img2) document.getElementById('img-m2').src = this.conf.img2;
                this.renderSidebar();
            },

            renderSidebar() {
                const navs = [
                    {id:1, n:this.conf.m1, i:'keyboard'},
                    {id:2, n:this.conf.m2, i:'book-open'},
                    {id:3, n:this.conf.m3, i:'trophy'},
                    {id:4, n:this.conf.m4, i:'users'}
                ];
                let h = `<div class="side-card"><div style="padding:25px; text-align:center; background:#eee"><b>üë§ ${this.user.u}</b></div>`;
                navs.forEach(n => h += `<div class="nav-item" id="nav-${n.id}" onclick="app.showPage(${n.id})"><i class="fa-solid fa-${n.i}"></i> ${n.n}</div>`);
                if(this.user.isAdmin) h += `<div class="nav-item" id="nav-god" style="color:var(--danger)" onclick="app.showPage('god')"><i class="fa-solid fa-ghost"></i> GOD MODE</div>`;
                h += `<div class="nav-item" style="color:#999" onclick="app.logout()">ƒêƒÉng xu·∫•t</div></div>`;
                document.getElementById('sidebar-inject').innerHTML = h;
            },

            showPage(id) {
                document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
                document.getElementById('page-'+id).classList.add('active');
                if(document.getElementById('nav-'+id)) document.getElementById('nav-'+id).classList.add('active');
                if(id === 1) this.resetTyping();
                if(id === 4) this.renderComm();
                if(id === 'god') this.renderAdmin();
            },

            resetTyping() {
                clearInterval(this.timer); this.timeLeft = this.conf.time; this.curIdx = 0; this.ok = 0; this.err = 0; this.isPlaying = false;
                document.getElementById('timer-1').innerText = "1:00";
                document.getElementById('input-1').value = ""; document.getElementById('input-1').disabled = false;
                this.words = Array.from({length:40}, () => BIG_DATA[Math.floor(Math.random()*BIG_DATA.length)]);
                this.renderWords();
            },

            renderWords() {
                document.getElementById('display-1').innerHTML = this.words.map((w,i) => `<span id="w-${i}" class="${i===0?'word-active':''}">${w}</span>`).join(" ");
            },

            handleInput(e) {
                if(!this.isPlaying) { this.isPlaying = true; this.startT(); }
                if(e.target.value.endsWith(" ")) {
                    const typed = e.target.value.trim();
                    const el = document.getElementById('w-'+this.curIdx);
                    if(typed === this.words[this.curIdx]) { el.className = 'word-correct'; this.ok++; }
                    else { el.className = 'word-wrong'; this.err++; }
                    this.curIdx++;
                    if(this.curIdx < this.words.length) document.getElementById('w-'+this.curIdx).className = 'word-active';
                    else this.finish();
                    e.target.value = "";
                }
            },

            startT() {
                this.timer = setInterval(() => {
                    this.timeLeft--;
                    let m = Math.floor(this.timeLeft / 60), s = this.timeLeft % 60;
                    document.getElementById('timer-1').innerText = `${m}:${s < 10 ? '0'+s : s}`;
                    if(this.timeLeft <= 0) this.finish();
                }, 1000);
            },

            finish() {
                clearInterval(this.timer);
                const acc = Math.round((this.ok / (this.ok + this.err)) * 100) || 0;
                document.getElementById('r-wpm').innerText = this.ok;
                document.getElementById('r-acc').innerText = acc + "%";
                document.getElementById('res-modal').style.display = 'flex';
                document.getElementById('input-1').disabled = true;
                // Save Rank
                let ranks = JSON.parse(localStorage.getItem('ranks') || "[]");
                ranks.push({u:this.user.u, wpm:this.ok, acc});
                ranks.sort((a,b) => b.wpm - a.wpm);
                localStorage.setItem('ranks', JSON.stringify(ranks.slice(0,10)));
                this.renderRank();
            },

            renderRank() {
                const ranks = JSON.parse(localStorage.getItem('ranks') || "[]");
                document.getElementById('rank-data').innerHTML = ranks.map((r,i) => `<tr><td>${i+1}</td><td>${r.u}</td><td>${r.wpm}</td><td>${r.acc}%</td></tr>`).join("");
            },

            closeRes() { document.getElementById('res-modal').style.display = 'none'; this.resetTyping(); },

            // M·ª•c 4
            renderComm() {
                let posts = JSON.parse(localStorage.getItem('posts_v14') || "[]");
                const q = document.getElementById('q-comm').value.toLowerCase();
                if(q) posts = posts.filter(p => p.t.toLowerCase().includes(q));
                document.getElementById('comm-data').innerHTML = posts.map((p,i) => `
                    <tr><td><b>${p.t}</b></td><td>${p.u}</td><td>‚ù§Ô∏è ${p.likes}</td>
                    <td><button class="btn-action btn-blue" onclick="app.like(${i})">Like</button> 
                    ${(this.user.isAdmin || p.u === this.user.u) ? `<button class="btn-action btn-red" onclick="app.delPost(${i})">X√≥a</button>` : ''}</td></tr>`).join("");
            },

            addPost() {
                const t = prompt("Ti√™u ƒë·ªÅ:"), c = prompt("N·ªôi dung:");
                if(t && c) {
                    let posts = JSON.parse(localStorage.getItem('posts_v14') || "[]");
                    posts.unshift({t, c, u:this.user.u, likes:0, date:Date.now()});
                    localStorage.setItem('posts_v14', JSON.stringify(posts));
                    this.renderComm();
                }
            },

            like(i) {
                let posts = JSON.parse(localStorage.getItem('posts_v14'));
                posts[i].likes++; localStorage.setItem('posts_v14', JSON.stringify(posts)); this.renderComm();
            },

            delPost(i) {
                let posts = JSON.parse(localStorage.getItem('posts_v14'));
                posts.splice(i, 1); localStorage.setItem('posts_v14', JSON.stringify(posts)); this.renderComm();
            },

            sortComm(type) {
                let posts = JSON.parse(localStorage.getItem('posts_v14') || "[]");
                if(type === 'like') posts.sort((a,b) => b.likes - a.likes);
                else posts.sort((a,b) => b.date - a.date);
                localStorage.setItem('posts_v14', JSON.stringify(posts)); this.renderComm();
            },

            // Admin Logic
            renderAdmin() {
                let h = '';
                for(let i=0; i<localStorage.length; i++){
                    let k = localStorage.key(i);
                    if(k.startsWith('u_')){
                        let d = JSON.parse(localStorage.getItem(k));
                        h += `<tr><td>${k.replace('u_','')}</td><td>${d.p}</td><td>${d.e}</td><td><button onclick="app.delU('${k}')">X√≥a</button></td></tr>`;
                    }
                }
                document.getElementById('user-data').innerHTML = h;
            },

            loadAdminSet() {
                const m = document.getElementById('sel-m').value;
                document.getElementById('set-t').value = this.conf['m'+m];
            },

            saveAdminSet() {
                const m = document.getElementById('sel-m').value;
                this.conf['m'+m] = document.getElementById('set-t').value;
                if(m == '2') this.conf.img2 = document.getElementById('set-i').value;
                localStorage.setItem('sys_v14', JSON.stringify(this.conf));
                location.reload();
            },

            saveTime() {
                this.conf.time = document.getElementById('set-time').value;
                localStorage.setItem('sys_v14', JSON.stringify(this.conf));
                alert("ƒê√£ ƒë·ªïi th·ªùi gian!");
            },

            delU(k) { if(confirm("X√≥a?")) { localStorage.removeItem(k); this.renderAdmin(); } },
            logout() { localStorage.removeItem('session_v14'); location.reload(); }
        };

        document.getElementById('input-1').addEventListener('input', (e) => app.handleInput(e));
        window.onload = () => { app.init(); app.renderRank(); };
    </script>
</body>
</html>
